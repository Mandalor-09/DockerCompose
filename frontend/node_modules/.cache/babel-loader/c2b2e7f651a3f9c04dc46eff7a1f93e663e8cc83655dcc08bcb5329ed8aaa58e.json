{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dell\\\\Desktop\\\\LearnDocker\\\\DjanoDocker\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, Navigate, useNavigate } from 'react-router-dom';\nimport Login from './components/Auth/Login';\nimport Register from './components/Auth/Register';\nimport TodoList from './components/Todo/TodoList';\nimport apiClient from './services/api';\nimport './App.css'; // Optional: for basic styling\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [username, setUsername] = useState('');\n  const [isLoading, setIsLoading] = useState(true); // Check token validity initially\n\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    const storedUsername = localStorage.getItem('username');\n    if (token && storedUsername) {\n      // Optional: Validate token with backend here if needed\n      // For simplicity, we assume the token is valid if present\n      setIsAuthenticated(true);\n      setUsername(storedUsername);\n    }\n    setIsLoading(false); // Done checking\n  }, []);\n  const handleLogout = async () => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n      try {\n        await apiClient.post('/auth/logout/');\n      } catch (error) {\n        var _error$response;\n        console.error(\"Logout error:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n        // Still proceed with local logout even if backend fails\n      } finally {\n        // Clear local storage regardless of backend response\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('username');\n        setIsAuthenticated(false);\n        setUsername('');\n        // Use navigate hook here if needed, or let Routes handle redirect\n        // navigate('/login'); // Navigate might be needed if not using Navigate component\n        window.location.href = '/login'; // Hard refresh can be simpler sometimes\n      }\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading application...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 14\n    }, this); // Or a proper spinner\n  }\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Todo App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: isAuthenticated ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"Welcome, \", username, \"!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleLogout,\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/register\",\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: isAuthenticated ? /*#__PURE__*/_jsxDEV(TodoList, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 42\n            }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n              to: \"/login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            element: !isAuthenticated ? /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 43\n            }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n              to: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/register\",\n            element: !isAuthenticated ? /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 45\n            }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n              to: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 60\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(Navigate, {\n              to: isAuthenticated ? \"/\" : \"/login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ZL2lFeT0P46uf1J21zZ0jFmnGqs=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Link","Navigate","useNavigate","Login","Register","TodoList","apiClient","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","isAuthenticated","setIsAuthenticated","username","setUsername","isLoading","setIsLoading","token","localStorage","getItem","storedUsername","handleLogout","post","error","_error$response","console","response","data","message","removeItem","window","location","href","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","to","path","element","_c","$RefreshReg$"],"sources":["C:/Users/dell/Desktop/LearnDocker/DjanoDocker/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, Navigate, useNavigate } from 'react-router-dom';\nimport Login from './components/Auth/Login';\nimport Register from './components/Auth/Register';\nimport TodoList from './components/Todo/TodoList';\nimport apiClient from './services/api';\nimport './App.css'; // Optional: for basic styling\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [username, setUsername] = useState('');\n  const [isLoading, setIsLoading] = useState(true); // Check token validity initially\n\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    const storedUsername = localStorage.getItem('username');\n    if (token && storedUsername) {\n        // Optional: Validate token with backend here if needed\n        // For simplicity, we assume the token is valid if present\n        setIsAuthenticated(true);\n        setUsername(storedUsername);\n    }\n    setIsLoading(false); // Done checking\n  }, []);\n\n  const handleLogout = async () => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n        try {\n            await apiClient.post('/auth/logout/');\n        } catch (error) {\n            console.error(\"Logout error:\", error.response?.data || error.message);\n            // Still proceed with local logout even if backend fails\n        } finally {\n             // Clear local storage regardless of backend response\n            localStorage.removeItem('authToken');\n            localStorage.removeItem('username');\n            setIsAuthenticated(false);\n            setUsername('');\n            // Use navigate hook here if needed, or let Routes handle redirect\n            // navigate('/login'); // Navigate might be needed if not using Navigate component\n             window.location.href = '/login'; // Hard refresh can be simpler sometimes\n        }\n    }\n  };\n\n  if (isLoading) {\n      return <div>Loading application...</div>; // Or a proper spinner\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <nav>\n          <h1>Todo App</h1>\n          <ul>\n            {isAuthenticated ? (\n              <>\n                <li>Welcome, {username}!</li>\n                <li><button onClick={handleLogout}>Logout</button></li>\n              </>\n            ) : (\n              <>\n                <li><Link to=\"/login\">Login</Link></li>\n                <li><Link to=\"/register\">Register</Link></li>\n              </>\n            )}\n          </ul>\n        </nav>\n\n        <main>\n          <Routes>\n            <Route\n              path=\"/\"\n              element={isAuthenticated ? <TodoList /> : <Navigate to=\"/login\" />}\n            />\n            <Route\n              path=\"/login\"\n              element={!isAuthenticated ? <Login /> : <Navigate to=\"/\" />}\n             />\n            <Route\n                path=\"/register\"\n                element={!isAuthenticated ? <Register /> : <Navigate to=\"/\" />}\n             />\n             {/* Catch-all or 404 route */}\n             <Route path=\"*\" element={<Navigate to={isAuthenticated ? \"/\" : \"/login\"} />} />\n          </Routes>\n        </main>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}